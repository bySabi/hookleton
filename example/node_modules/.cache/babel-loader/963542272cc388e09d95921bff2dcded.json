{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/flx/Dropbox/Projects/hookleton/example/pages/fetch.js\";\nimport React from \"react\";\nimport { useState, useEffect, useCallback } from 'react';\nimport createHook from '../component';\n\nvar throttle = function throttle(func, limit) {\n  var inThrottle;\n  return function () {\n    var args = arguments;\n    var context = this;\n\n    if (!inThrottle) {\n      func.apply(context, args);\n      inThrottle = true;\n      setTimeout(function () {\n        return inThrottle = false;\n      }, limit);\n    }\n  };\n};\n\nvar useFetchUsers = createHook(function () {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      users = _useState2[0],\n      setUsers = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      again = _useState4[0],\n      updater = _useState4[1];\n\n  function fetchData() {\n    return _fetchData.apply(this, arguments);\n  }\n\n  function _fetchData() {\n    _fetchData = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('https://randomuser.me/api/?results=10');\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.json();\n\n            case 5:\n              data = _context.sent;\n              console.log('[useFetch]: Fetched 10 random users');\n              setUsers(data);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchData.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    fetchData();\n  }, [again]);\n  var fetchAgain = useCallback(throttle(function () {\n    return updater(function (s) {\n      return ~s;\n    });\n  }, 1000));\n  return [users, fetchAgain];\n});\n\nvar Hookletons = function Hookletons() {\n  useFetchUsers();\n  return null;\n};\n\nvar RenderUser = function RenderUser(_ref) {\n  var render = _ref.render;\n\n  var _useFetchUsers = useFetchUsers(),\n      _useFetchUsers2 = _slicedToArray(_useFetchUsers, 2),\n      data = _useFetchUsers2[0],\n      fetchAgain = _useFetchUsers2[1];\n\n  return React.createElement(\"ul\", {\n    style: {\n      listStyle: 'none',\n      borderStyle: 'solid'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, data.results && data.results.map(function (user, idx) {\n    return React.createElement(\"li\", {\n      key: idx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, idx, \": \"), function (user) {\n      return render(user);\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }));\n  }), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: fetchAgain,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"fetch Again\")));\n};\n\nvar Name = function Name(_ref2) {\n  var first = _ref2.first,\n      last = _ref2.last;\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, first, \" \", last);\n};\n\nvar Gender = function Gender(_ref3) {\n  var gender = _ref3.gender;\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, gender);\n};\n\nvar Location = function Location(_ref4) {\n  var street = _ref4.street,\n      city = _ref4.city,\n      state = _ref4.state;\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, street, \", \", city, \", \", state);\n};\n\nvar Email = function Email(_ref5) {\n  var email = _ref5.email;\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, email);\n};\n\nexport default (function () {\n  return React.createElement(React.Fragment, null, React.createElement(Hookletons, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(RenderUser, {\n    render: Name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }))))));\n});","map":{"version":3,"sources":["/Users/flx/Dropbox/Projects/hookleton/example/pages/fetch.js"],"names":["useState","useEffect","useCallback","createHook","throttle","func","limit","inThrottle","args","arguments","context","apply","setTimeout","useFetchUsers","users","setUsers","again","updater","fetchData","fetch","response","json","data","console","log","fetchAgain","s","Hookletons","RenderUser","render","listStyle","borderStyle","results","map","user","idx","Name","first","last","Gender","gender","Location","street","city","state","Email","email"],"mappings":"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","sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport createHook from '../component';\n\nconst throttle = (func, limit) => {\n  let inThrottle;\n  return function() {\n    const args = arguments;\n    const context = this;\n    if (!inThrottle) {\n      func.apply(context, args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n};\n\nconst useFetchUsers = createHook(() => {\n  const [users, setUsers] = useState({});\n  const [again, updater] = useState();\n\n  async function fetchData() {\n    const response = await fetch('https://randomuser.me/api/?results=10');\n    const data = await response.json();\n    console.log('[useFetch]: Fetched 10 random users');\n    setUsers(data);\n  }\n\n  useEffect(() => {\n    fetchData();\n  }, [again]);\n\n  const fetchAgain = useCallback(throttle(() => updater(s => ~s), 1000));\n\n  return [users, fetchAgain];\n});\n\nconst Hookletons = () => {\n  useFetchUsers();\n  return null;\n};\n\nconst RenderUser = ({ render }) => {\n  const [data, fetchAgain] = useFetchUsers();\n  return (\n    <ul style={{ listStyle: 'none', borderStyle: 'solid' }}>\n      {data.results &&\n        data.results.map((user, idx) => (\n          <li key={idx}>\n            <span>{idx}: </span>\n            {user => render(user)}\n            <br />\n          </li>\n        ))}\n      <li>\n        <button onClick={fetchAgain}>fetch Again</button>\n      </li>\n    </ul>\n  );\n};\n\nconst Name = ({ first, last }) => (\n  <span>\n    {first} {last}\n  </span>\n);\nconst Gender = ({ gender }) => <span>{gender}</span>;\nconst Location = ({ street, city, state }) => (\n  <span>\n    {street}, {city}, {state}\n  </span>\n);\nconst Email = ({ email }) => <span>{email}</span>;\n\nexport default () => (\n  <>\n    <Hookletons />\n    <table>\n      <tbody>\n        <tr>\n          <td>\n            <RenderUser render={Name} />\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </>\n);\n"]},"metadata":{},"sourceType":"module"}