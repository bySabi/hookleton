{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/flx/Dropbox/Projects/hookleton/example/pages/fetch.js\";\nimport React from \"react\";\nimport { useState, useEffect, useCallback } from 'react';\nimport createHook from '../component';\n\nvar throttle = function throttle(func, limit) {\n  var inThrottle;\n  return function () {\n    var args = arguments;\n    var context = this;\n\n    if (!inThrottle) {\n      func.apply(context, args);\n      inThrottle = true;\n      setTimeout(function () {\n        return inThrottle = false;\n      }, limit);\n    }\n  };\n};\n\nvar useFetchUsers = createHook(function () {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      users = _useState2[0],\n      setUsers = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      again = _useState4[0],\n      updater = _useState4[1];\n\n  function fetchData() {\n    return _fetchData.apply(this, arguments);\n  }\n\n  function _fetchData() {\n    _fetchData = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('https://randomuser.me/api/?results=10');\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.json();\n\n            case 5:\n              data = _context.sent;\n              console.log('[useFetch]: Fetched 10 random users');\n              setUsers(data);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchData.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    fetchData();\n  }, [again]);\n  var fetchAgain = useCallback(throttle(function () {\n    return updater(function (s) {\n      return ~s;\n    });\n  }, 1000));\n  return [users, fetchAgain];\n});\n\nvar Hookletons = function Hookletons() {\n  useFetchUsers();\n  return null;\n};\n\nvar Genders = function Genders() {\n  var _useFetchUsers = useFetchUsers(),\n      _useFetchUsers2 = _slicedToArray(_useFetchUsers, 2),\n      data = _useFetchUsers2[0],\n      fetchAgain = _useFetchUsers2[1];\n\n  return React.createElement(\"ul\", {\n    style: {\n      listStyle: 'none',\n      borderStyle: 'solid'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, data.results && data.results.map(function (user, idx) {\n    return React.createElement(\"li\", {\n      key: idx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, idx), user.gender, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }));\n  }), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: fetchAgain,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"fetch Again\")));\n};\n\nvar Name = function Name() {};\n\nvar Location = function Location() {};\n\nvar Email = function Email() {};\n\nexport default (function () {\n  return React.createElement(React.Fragment, null, React.createElement(Hookletons, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Genders, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }))))));\n});","map":{"version":3,"sources":["/Users/flx/Dropbox/Projects/hookleton/example/pages/fetch.js"],"names":["useState","useEffect","useCallback","createHook","throttle","func","limit","inThrottle","args","arguments","context","apply","setTimeout","useFetchUsers","users","setUsers","again","updater","fetchData","fetch","response","json","data","console","log","fetchAgain","s","Hookletons","Genders","listStyle","borderStyle","results","map","user","idx","gender","Name","Location","Email"],"mappings":";;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,WAA9B,QAAiD,OAAjD;AACA,OAAOC,UAAP,MAAuB,cAAvB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD,EAAOC,KAAP,EAAiB;AAChC,MAAIC,UAAJ;AACA,SAAO,YAAW;AAChB,QAAMC,IAAI,GAAGC,SAAb;AACA,QAAMC,OAAO,GAAG,IAAhB;;AACA,QAAI,CAACH,UAAL,EAAiB;AACfF,MAAAA,IAAI,CAACM,KAAL,CAAWD,OAAX,EAAoBF,IAApB;AACAD,MAAAA,UAAU,GAAG,IAAb;AACAK,MAAAA,UAAU,CAAC;AAAA,eAAOL,UAAU,GAAG,KAApB;AAAA,OAAD,EAA6BD,KAA7B,CAAV;AACD;AACF,GARD;AASD,CAXD;;AAaA,IAAMO,aAAa,GAAGV,UAAU,CAAC,YAAM;AAAA,kBACXH,QAAQ,CAAC,EAAD,CADG;AAAA;AAAA,MAC9Bc,KAD8B;AAAA,MACvBC,QADuB;;AAAA,mBAEZf,QAAQ,EAFI;AAAA;AAAA,MAE9BgB,KAF8B;AAAA,MAEvBC,OAFuB;;AAAA,WAItBC,SAJsB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,6BAIrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACyBC,KAAK,CAAC,uCAAD,CAD9B;;AAAA;AACQC,cAAAA,QADR;AAAA;AAAA,qBAEqBA,QAAQ,CAACC,IAAT,EAFrB;;AAAA;AAEQC,cAAAA,IAFR;AAGEC,cAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ;AACAT,cAAAA,QAAQ,CAACO,IAAD,CAAR;;AAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAJqC;AAAA;AAAA;;AAWrCrB,EAAAA,SAAS,CAAC,YAAM;AACdiB,IAAAA,SAAS;AACV,GAFQ,EAEN,CAACF,KAAD,CAFM,CAAT;AAIA,MAAMS,UAAU,GAAGvB,WAAW,CAACE,QAAQ,CAAC;AAAA,WAAMa,OAAO,CAAC,UAAAS,CAAC;AAAA,aAAI,CAACA,CAAL;AAAA,KAAF,CAAb;AAAA,GAAD,EAAyB,IAAzB,CAAT,CAA9B;AAEA,SAAO,CAACZ,KAAD,EAAQW,UAAR,CAAP;AACD,CAlB+B,CAAhC;;AAoBA,IAAME,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBd,EAAAA,aAAa;AACb,SAAO,IAAP;AACD,CAHD;;AAKA,IAAMe,OAAO,GAAG,SAAVA,OAAU,GAAM;AAAA,uBACOf,aAAa,EADpB;AAAA;AAAA,MACbS,IADa;AAAA,MACPG,UADO;;AAEpB,SACE;AAAI,IAAA,KAAK,EAAE;AAAEI,MAAAA,SAAS,EAAE,MAAb;AAAqBC,MAAAA,WAAW,EAAE;AAAlC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,IAAI,CAACS,OAAL,IACCT,IAAI,CAACS,OAAL,CAAaC,GAAb,CAAiB,UAACC,IAAD,EAAOC,GAAP;AAAA,WACf;AAAI,MAAA,GAAG,EAAEA,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOA,GAAP,CADF,EAEGD,IAAI,CAACE,MAFR,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADe;AAAA,GAAjB,CAFJ,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAQ,IAAA,OAAO,EAAEV,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CATF,CADF;AAeD,CAjBD;;AAmBA,IAAMW,IAAI,GAAG,SAAPA,IAAO,GAAM,CAAE,CAArB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM,CAAE,CAAzB;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM,CAAE,CAAtB;;AAEA,gBAAe;AAAA,SACb,0CACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAJ,CADQ,CAAP,CAAP,CAFF,CADa;AAAA,CAAf","sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport createHook from '../component';\n\nconst throttle = (func, limit) => {\n  let inThrottle;\n  return function() {\n    const args = arguments;\n    const context = this;\n    if (!inThrottle) {\n      func.apply(context, args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n};\n\nconst useFetchUsers = createHook(() => {\n  const [users, setUsers] = useState({});\n  const [again, updater] = useState();\n\n  async function fetchData() {\n    const response = await fetch('https://randomuser.me/api/?results=10');\n    const data = await response.json();\n    console.log('[useFetch]: Fetched 10 random users');\n    setUsers(data);\n  }\n\n  useEffect(() => {\n    fetchData();\n  }, [again]);\n\n  const fetchAgain = useCallback(throttle(() => updater(s => ~s), 1000));\n\n  return [users, fetchAgain];\n});\n\nconst Hookletons = () => {\n  useFetchUsers();\n  return null;\n};\n\nconst Genders = () => {\n  const [data, fetchAgain] = useFetchUsers();\n  return (\n    <ul style={{ listStyle: 'none', borderStyle: 'solid' }}>\n      {data.results &&\n        data.results.map((user, idx) => (\n          <li key={idx}>\n            <span>{idx}</span>\n            {user.gender}\n            <br />\n          </li>\n        ))}\n      <li>\n        <button onClick={fetchAgain}>fetch Again</button>\n      </li>\n    </ul>\n  );\n};\n\nconst Name = () => {};\n\nconst Location = () => {};\n\nconst Email = () => {};\n\nexport default () => (\n  <>\n    <Hookletons />\n    <table><tbody><tr>\n          <td><Genders /></td>\n     </tr></tbody></table>\n  </>\n);\n"]},"metadata":{},"sourceType":"module"}